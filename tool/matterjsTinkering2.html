<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Matter.js Simple Example</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
        <style>
            body { margin: 0; overflow: hidden; }
            canvas { display: block; }
        </style>
    </head>
    <body>
        <script>
            // Matter.js aliases for convenience
            var Engine = Matter.Engine,
                Runner = Matter.Runner;
                Render = Matter.Render,
                World = Matter.World,
                Bodies = Matter.Bodies,
                Composite = Matter.Composite,
                Mouse = Matter.Mouse,
                MouseConstraint = Matter.MouseConstraint;

            // Create an engine & runner
            const engine = Engine.create();
            const runner = Runner.create();

            // Create a renderer
            var render = Render.create({
                element: document.body,
                engine: engine,
                options: {
                    width: 800,
                    height: 600,
                    wireframes: false // Set to true to see wireframes instead of solid shapes
                }
            });

            // // example of how to make a box
            // var boxA = Bodies.rectangle(400, 200, 80, 80);
            // var boxB = Bodies.rectangle(450, 50, 80, 80);

            var ground = Bodies.rectangle(400, 590, 810, 20, { isStatic: true }); // isStatic prevents movement
            var box = Bodies.rectangle(200, 200, 100, 40);

            // add mouse control
            const mouse = Mouse.create(render.canvas);
            const mouseConstraint = MouseConstraint.create(engine, {
                mouse: mouse,
                constraint: {
                    stiffness: 0.001,
                    render: {
                        visible: true
                    }
                }
            });

            document.addEventListener('keydown', function(event) {
                if (event.code === 'Space') {
                    // Create a new box at a random horizontal position
                    const newBox = Matter.Bodies.rectangle(
                        Math.random() * 800, 0, Math.random() * 200, Math.random() * 80 + 50);

      d.add(engine.world, newBox);
                }
            });

            // Add all of the bodies to the world
            World.add(engine.world, [ground, box, mouseConstraint]);

            // keep the mouse in sync with rendering
            render.mouse = mouse;

            // Run the engine
            Runner.run(runner, engine);

            // Run the renderer
            Render.run(render);
        </script>
    </body>
</html>
